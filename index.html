<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Get Hooked on Git Hooks</title>
    <link rel="stylesheet" href="deck.js/core/deck.core.css">
    <link rel="stylesheet" href="deck.js/themes/style/web-2.0.css">
    <link rel="stylesheet" href="deck.js/themes/transition/horizontal-slide.css">
    <link rel="stylesheet" href="deck.js/extensions/status/deck.status.css">
    <link rel="stylesheet/less" href="styles.less">
    <script src="less-1.3.1.min.js"></script>
    <script src="deck.js/modernizr.custom.js"></script>
</head>

<body>
<section class="slide title">
    <h1 class="get">Get Hooked</h1>
    <h1 class="git">on Git Hooks</h1>
    <div><img alt="Fishing hooks" src="images/hooks.jpg"></div>
</section>

<section class="slide about-me">
    <div class="centered">
        <img alt="Omni Adams" class="pull-left" src="images/omni-simpson.jpg">
        <ul class="pull-right">
            <li>Omni Adams</li>
            <li>@omnicolor</li>
            <li>http://omni-spot.blogspot.com</li>
            <li>omni@digitaldarkness.com</li>
            <li>https://joind.in/8200</li>
        </ul>
    </div>
    <ul class="note">
        <li>1st, a little about me</li>
        <li>my name is</li>
        <li>find me on the twitter</li>
        <li>check out my blog</li>
        <li>feel free to email me</li>
        <li>This slide will be repeated at the end of this session</li>
        <li>And I will put the slides up somewhere as well</li>
        <li>a few things about this talk</li>
        <li>I try to be funny, it's okay to laugh</li>
        <li>If you're easily offended</li>
        <li>Feel free to ask questions</li>
        <li>Don't be scared by the number in the lower right</li>
    </ul>
</section>

<section class="slide captain-hook">
    <img alt="http://wtfshiznit.blogspot.com/2011/04/wtf-hoff.html"
            class="centered" src="images/captain-hook.jpg">
    <ul class="note">
        <li>First off, what is a git hook?</li>
        <li>No, we're not talking about pirates</li>
        <li>I assume you're all using git</li>
        <li>This talk might be slightly useful if you use Subversion</li>
        <li>It does have some of the same concepts</li>
        <li>But everything will be done slightly differently</li>
        <li>And will probably use different terminology</li>
        <li>So what do &rarr; git hooks</li>
    </ul>
</section>

<section class="slide what-do-you-do">
    <img alt="http://edaltorfer.com/blog/wp-content/uploads/2011/08/WhatWouldYouSayYouDoHere.png"
            class="centered" src="images/what-do-you-do.png">
    <ul class="note">
        <li>do here?</li>
        <li>That's really up to your imagination</li>
        <li>I'm going to show you a few examples</li>
        <li>Hopefully that inspires you to create your own</li>
        <li>If you were really feeling crazy you could create a CI</li>
        <li>but a better CI: it could reject things that would break it</li>
    </ul>
</section>

<section class="slide gatekeeper">
    <img alt="http://www.saalonmuyo.com/wp-content/uploads/2012/08/ghostbusters-gatekeeper.jpeg"
        class="centered" src="images/gatekeeper.jpg">
    <ul class="note">
        <li>Git hooks can act as a gatekeeper</li>
        <li>Inspecting your code ahead of time</li>
        <li>and bring down ancient Sumerian gods of destruction</li>
        <li>if the code isn't good enough</li>
        <li>Or after the fact it can hunt you down and... uhhh &rarr; politely</li>
    </ul>
</section>

<section class="slide dexter">
    <img alt="http://images5.fanpop.com/image/photos/25200000/Dexter-plastic-sheets-dexter-25239677-1511-911.jpg"
            class="centered" src="images/dexter.jpg">
    <ul class="note">
        <li>let you know that you did something wrong</li>
        <li>it can send out emails</li>
        <li>or publish reports</li>
        <li>or change build indicators</li>
        <li>Git hooks can even &rarr; change history</li>
    </ul>
</section>

<section class="slide mcfly">
    <img alt="http://themoviedoc.tumblr.com/post/4990263114/destiny"
            class="centered" src="images/mcfly.jpg">
    <ul class="note">
        <li>... change history</li>
        <li>seriously though, hooks are very powerful</li>
    </ul>
</section>

<section class="slide git-workflow">
    <div class="big-sticky clone">Clone</div>
    <div class="big-sticky checkout">
        Checkout
        <div class="small-sticky post-checkout">Post-checkout</div>
    </div>
    <div class="big-sticky merge">
        Merge
        <div class="small-sticky post-merge">Post-merge</div>
    </div>
    <div class="big-sticky add">Add</div>
    <div class="big-sticky commit">
        Commit
        <div class="small-sticky post-commit">Post-commit</div>
        <div class="small-sticky pre-commit">Pre-commit</div>
        <div class="small-sticky prepare-commit-msg">Prepare-commit-message</div>
        <div class="small-sticky commit-msg">Commit-msg</div>
    </div>
    <div class="big-sticky push">Push</div>
    <div class="big-sticky pull">Pull</div>
    <div class="big-sticky rebase">
        Rebase
        <div class="small-sticky pre-rebase">Pre-rebase</div>
    </div>
    <div class="big-sticky work">Work</div>
    <div class="big-sticky receive">
        Receive
        <div class="small-sticky pre-receive">Pre-receive</div>
        <div class="small-sticky post-receive">Post-receive</div>
    </div>
    <div class="big-sticky update">
        Update
        <div class="small-sticky update-hook">Update</div>
    </div>
    <ul class="note">
        <li>There's a bunch of different places you can add hooks</li>
        <li>Here's a diagram of common actions in git</li>
        <li>along with the hooks for each step</li>
        <li>The white box is where you do your work</li>
        <li>Yellowish boxen are git commands that you execute on locally</li>
        <li>Gray boxen happen on the server</li>
        <li>Finally, bright yellow boxen are where the git hooks happen</li>
        <li>Git hooks on the left of the action happen before it</li>
        <li>things on the right happen after it</li>
        <li>And update is a weird case</li>
    </ul>
</section>

<section class="slide no-email">
    <img alt="http://blog.swabr.com/wp-content/uploads/2012/10/no-email.jpg"
            class="centered" src="images/no-email.jpg">
    <ul class="note">
        <li>A quick note</li>
        <li>git was written by and for the Linux Kernel developers</li>
        <li>their workflow involves lots of patches via email</li>
        <li>Most of us don't develop this way, we use a central git server</li>
        <li>or github</li>
        <li>There are 3 hooks associated with this</li>
        <li>applyprepatch-msg, pre-applypatch, and post-applypatch</li>
        <li>I'm going to ignore them since the PHP community doesn't use them</li>
    </ul>
</section>

<section class="slide overview">
    <img alt="Overview map" class="centered" src="images/overview.png">
    <ul class="note">
        <li>First I'm going to run quickly through the available hooks</li>
        <li>I'll give a high-level overview of each</li>
        <li>and what you might want use them for</li>
        <li>Then we'll get into how to actually write the hooks</li>
    </ul>
</section>

<section class="slide git-workflow">
    <div class="big-sticky clone">Clone</div>
    <div class="big-sticky checkout">
        Checkout
        <div class="small-sticky post-checkout">Post-checkout</div>
    </div>
    <div class="big-sticky merge">
        Merge
        <div class="small-sticky post-merge">Post-merge</div>
    </div>
    <div class="big-sticky add">Add</div>
    <div class="big-sticky commit">
        Commit
        <div class="small-sticky post-commit">Post-commit</div>
        <div class="small-sticky pre-commit">Pre-commit</div>
        <div class="small-sticky prepare-commit-msg">Prepare-commit-message</div>
        <div class="small-sticky commit-msg">Commit-msg</div>
    </div>
    <div class="big-sticky push">Push</div>
    <div class="big-sticky pull">Pull</div>
    <div class="big-sticky rebase">
        Rebase
        <div class="small-sticky pre-rebase highlight">Pre-rebase</div>
    </div>
    <div class="big-sticky work">Work</div>
    <div class="big-sticky receive">
        Receive
        <div class="small-sticky pre-receive">Pre-receive</div>
        <div class="small-sticky post-receive">Post-receive</div>
    </div>
    <div class="big-sticky update">
        Update
        <div class="small-sticky update-hook">Update</div>
    </div>
    <ul class="note">
        <li>Let's start at the left</li>
        <li>How many of y'all use rebase?</li>
        <li>Rebase is a bit like magic and is really powerful</li>
        <li>But with great power &rarr; comes great</li>
    </ul>
</section>

<section class="slide great-power">
    <img alt="http://lifeboat.com/ex/great.power.great.responsibility"
            class="centered" src="images/great-power.jpg">
    <ul class="note">
        <li>comes great ... responsibility</li>
        <li>If you push your changes to a remote</li>
        <li>then rebase and push again</li>
        <li>very bad things can happen</li>
        <li>To keep you from killing Uncle Ben</li>
        <li>you can use a pre-rebase hook to stop you</li>
    </ul>
</section>

<section class="slide git-workflow">
    <div class="big-sticky clone">Clone</div>
    <div class="big-sticky checkout">
        Checkout
        <div class="small-sticky post-checkout highlight">Post-checkout</div>
    </div>
    <div class="big-sticky merge">
        Merge
        <div class="small-sticky post-merge">Post-merge</div>
    </div>
    <div class="big-sticky add">Add</div>
    <div class="big-sticky commit">
        Commit
        <div class="small-sticky post-commit">Post-commit</div>
        <div class="small-sticky pre-commit">Pre-commit</div>
        <div class="small-sticky prepare-commit-msg">Prepare-commit-message</div>
        <div class="small-sticky commit-msg">Commit-msg</div>
    </div>
    <div class="big-sticky push">Push</div>
    <div class="big-sticky pull">Pull</div>
    <div class="big-sticky rebase">
        Rebase
        <div class="small-sticky pre-rebase">Pre-rebase</div>
    </div>
    <div class="big-sticky work">Work</div>
    <div class="big-sticky receive">
        Receive
        <div class="small-sticky pre-receive">Pre-receive</div>
        <div class="small-sticky post-receive">Post-receive</div>
    </div>
    <div class="big-sticky update">
        Update
        <div class="small-sticky update-hook">Update</div>
    </div>
    <ul class="note">
        <li>Next up is the post-checkout hook</li>
        <li>Any of y'all use lots of branches</li>
        <li>and frequently switch between them?</li>
        <li>post-checkout lets you reboot your &rarr; universe</li>
    </ul>
</section>

<section class="slide universe">
    <img alt="http://imgur.com/gallery/lxHqF" class="centered"
            src="images/in-the-beginning.jpg">
    <ul class="note">
        <li>For example, if you have config files that aren't checked in</li>
        <li>and are different for different branches</li>
        <li>the post-checkout hook can do that</li>
        <li>Or if you use compiled JS or CSS, you can immediately recompile</li>
    </ul>
</section>

<section class="slide git-workflow">
    <div class="big-sticky clone">Clone</div>
    <div class="big-sticky checkout">
        Checkout
        <div class="small-sticky post-checkout">Post-checkout</div>
    </div>
    <div class="big-sticky merge">
        Merge
        <div class="small-sticky post-merge highlight">Post-merge</div>
    </div>
    <div class="big-sticky add">Add</div>
    <div class="big-sticky commit">
        Commit
        <div class="small-sticky post-commit">Post-commit</div>
        <div class="small-sticky pre-commit">Pre-commit</div>
        <div class="small-sticky prepare-commit-msg">Prepare-commit-message</div>
        <div class="small-sticky commit-msg">Commit-msg</div>
    </div>
    <div class="big-sticky push">Push</div>
    <div class="big-sticky pull">Pull</div>
    <div class="big-sticky rebase">
        Rebase
        <div class="small-sticky pre-rebase">Pre-rebase</div>
    </div>
    <div class="big-sticky work">Work</div>
    <div class="big-sticky receive">
        Receive
        <div class="small-sticky pre-receive">Pre-receive</div>
        <div class="small-sticky post-receive">Post-receive</div>
    </div>
    <div class="big-sticky update">
        Update
        <div class="small-sticky update-hook">Update</div>
    </div>
    <ul class="note">
        <li>The post-merge hook gets run after a successful merge</li>
        <li>And by successful I mean, no errors</li>
        <li>That doesn't mean the code itself is good</li>
        <li>Especially if you have junior &rarr; developers</li>
    </ul>
</section>

<section class="slide merge-conflict">
    <img alt="http://chuva-inc.com/sites/default/files/blog_posts/356merge-conflicts.jpg"
            class="centered"
            src="http://chuva-inc.com/sites/default/files/blog_posts/356merge-conflicts.jpg">
    <ul class="note">
        <li>developers ... on your team</li>
        <li>After all, git won't complain about leaving the conflict in</li>
        <li>You can git pull and see there's a conflict</li>
        <li>then without editing the file git add and commit it</li>
        <li>And yes, I've had a teammate do that</li>
        <li>So you might want to run lint on your project after merging</li>
    </ul>
</section>

<section class="slide git-workflow">
    <div class="big-sticky clone">Clone</div>
    <div class="big-sticky checkout">
        Checkout
        <div class="small-sticky post-checkout">Post-checkout</div>
    </div>
    <div class="big-sticky merge">
        Merge
        <div class="small-sticky post-merge">Post-merge</div>
    </div>
    <div class="big-sticky add">Add</div>
    <div class="big-sticky commit">
        Commit
        <div class="small-sticky post-commit">Post-commit</div>
        <div class="small-sticky pre-commit highlight">Pre-commit</div>
        <div class="small-sticky prepare-commit-msg">Prepare-commit-message</div>
        <div class="small-sticky commit-msg">Commit-msg</div>
    </div>
    <div class="big-sticky push">Push</div>
    <div class="big-sticky pull">Pull</div>
    <div class="big-sticky rebase">
        Rebase
        <div class="small-sticky pre-rebase">Pre-rebase</div>
    </div>
    <div class="big-sticky work">Work</div>
    <div class="big-sticky receive">
        Receive
        <div class="small-sticky pre-receive">Pre-receive</div>
        <div class="small-sticky post-receive">Post-receive</div>
    </div>
    <div class="big-sticky update">
        Update
        <div class="small-sticky update-hook">Update</div>
    </div>
    <ul class="note">
        <li>The most interesting local hook is the pre-commit</li>
        <li>It gets run before you even type in your commit message</li>
        <li>You can use this to run static analysis tools</li>
        <li>Which allows you to &rarr; avoid hurting</li>
    </ul>
</section>

<section class="slide cork">
    <img alt="http://thelottolife.com/storage/ruprecht.jpg?__SQUARESPACE_CACHEVERSION=1335481235961"
            class="centered" src="images/ruprecht.jpg">
    <ul class="note">
        <li>hurting ... yourself or your code base</li>
        <li>Pretty much anything you can run from the command line</li>
        <li>to tell you your code is broken can be done here</li>
        <li>and automatically reject bad changes</li>
        <li>One thing I like here is to scan for certain words</li>
        <li>like no-commit in all caps</li>
        <li>Then if I put that in a comment around debugging code</li>
        <li>I'll never accidentally commit debugging stuff</li>
    </ul>
</section>

<section class="slide git-workflow">
    <div class="big-sticky clone">Clone</div>
    <div class="big-sticky checkout">
        Checkout
        <div class="small-sticky post-checkout">Post-checkout</div>
    </div>
    <div class="big-sticky merge">
        Merge
        <div class="small-sticky post-merge">Post-merge</div>
    </div>
    <div class="big-sticky add">Add</div>
    <div class="big-sticky commit">
        Commit
        <div class="small-sticky post-commit">Post-commit</div>
        <div class="small-sticky pre-commit">Pre-commit</div>
        <div class="small-sticky prepare-commit-msg highlight">Prepare-commit-message</div>
        <div class="small-sticky commit-msg">Commit-msg</div>
    </div>
    <div class="big-sticky push">Push</div>
    <div class="big-sticky pull">Pull</div>
    <div class="big-sticky rebase">
        Rebase
        <div class="small-sticky pre-rebase">Pre-rebase</div>
    </div>
    <div class="big-sticky work">Work</div>
    <div class="big-sticky receive">
        Receive
        <div class="small-sticky pre-receive">Pre-receive</div>
        <div class="small-sticky post-receive">Post-receive</div>
    </div>
    <div class="big-sticky update">
        Update
        <div class="small-sticky update-hook">Update</div>
    </div>
    <ul class="note">
        <li>The prepare commit message hook isn't all that useful</li>
        <li>If you have a system that makes commits automatically</li>
        <li>you might use it, or if you wanted to automatically add info</li>
        <li>It lets you change the commit &rarr; message</li>
    </ul>
</section>

<section class="slide message-for-you">
    <img alt="http://cheezburger.com/4404460544" class="centered"
            src="images/message-for-you.jpg">
    <ul class="note">
        <li>message ... before it gets edited</li>
        <li>So you might want to put the output of lint or phploc</li>
        <li>Or the status of unit tests</li>
    </ul>
</section>

<section class="slide git-workflow">
    <div class="big-sticky clone">Clone</div>
    <div class="big-sticky checkout">
        Checkout
        <div class="small-sticky post-checkout">Post-checkout</div>
    </div>
    <div class="big-sticky merge">
        Merge
        <div class="small-sticky post-merge">Post-merge</div>
    </div>
    <div class="big-sticky add">Add</div>
    <div class="big-sticky commit">
        Commit
        <div class="small-sticky post-commit">Post-commit</div>
        <div class="small-sticky pre-commit">Pre-commit</div>
        <div class="small-sticky prepare-commit-msg">Prepare-commit-message</div>
        <div class="small-sticky commit-msg highlight">Commit-msg</div>
    </div>
    <div class="big-sticky push">Push</div>
    <div class="big-sticky pull">Pull</div>
    <div class="big-sticky rebase">
        Rebase
        <div class="small-sticky pre-rebase">Pre-rebase</div>
    </div>
    <div class="big-sticky work">Work</div>
    <div class="big-sticky receive">
        Receive
        <div class="small-sticky pre-receive">Pre-receive</div>
        <div class="small-sticky post-receive">Post-receive</div>
    </div>
    <div class="big-sticky update">
        Update
        <div class="small-sticky update-hook">Update</div>
    </div>
    <ul class="note">
        <li>The commit message hook runs after you save your commit message</li>
        <li>but before your message gets committed to your local repo</li>
        <li>It's your last chance to stop yourself &rarr; before</li>
    </ul>
</section>

<section class="slide seven">
    <img alt="http://tomshone.blogspot.com/2010/04/horror-movies-in-broad-daylight.html"
            class="centered" src="images/seven.jpg">
    <ul class="note">
        <li>before ... you shoot someone in the head</li>
        <li>or yourself in the foot</li>
        <li>If you require bug numbers in commit messages</li>
        <li>Or run a scan to keep profanity out</li>
        <li>You'd run that here</li>
    </ul>
</section>

<p class="deck-status">
	<span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span>
</p>

<script src="deck.js/jquery-1.7.2.min.js"></script>
<script src="deck.js/core/deck.core.js"></script>
<script src="deck.js/extensions/status/deck.status.js"></script>
<script src="deck.js/extensions/hash/deck.hash.js"></script>
<script src="hooks.js"></script>

</body></html>
